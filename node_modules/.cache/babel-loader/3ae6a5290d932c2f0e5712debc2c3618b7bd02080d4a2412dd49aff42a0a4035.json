{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useWeather.js\nimport { useState, useEffect } from 'react';\nimport { geocodeCity, fetchCurrentByCoords, fetchDailyForecastByCoords, fetchHourlyForecastByCoords } from '../api/weather';\n\n/**\n * @param {{\n *   city?: string,\n *   geo?: { lat: number, lon: number },\n *   units?: 'METRIC' | 'IMPERIAL'\n * }} options\n */\nexport function useWeather({\n  city = null,\n  geo = null,\n  units = 'METRIC'\n} = {}) {\n  _s();\n  var _geo$lat;\n  const [current, setCurrent] = useState(null);\n  const [daily, setDaily] = useState(null);\n  const [hourly, setHourly] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  //pull primitives out of geo for stable deps\n  const lat = (_geo$lat = geo === null || geo === void 0 ? void 0 : geo.lat) !== null && _geo$lat !== void 0 ? _geo$lat : n;\n  useEffect(() => {\n    let cancelled = false;\n    async function loadWeather() {\n      setLoading(true);\n      setError(null);\n      try {\n        // 1️⃣ Resolve coordinates\n        const coords = city ? await geocodeCity(city) : {\n          lat: geo.lat,\n          lon: geo.lon\n        };\n\n        // 2️⃣ Fetch everything in parallel, passing the chosen units\n        const [curRes, dayRes, hrRes] = await Promise.all([fetchCurrentByCoords(coords, units), fetchDailyForecastByCoords(coords, 5, 5, units), fetchHourlyForecastByCoords(coords, 24, 24, units)]);\n        if (!cancelled) {\n          setCurrent(curRes); // { currentConditions, metadata }\n          setDaily(dayRes.forecastDays || dayRes); // array of day forecasts\n          setHourly(hrRes.forecastHours || hrRes); // array of hour forecasts\n        }\n      } catch (err) {\n        if (!cancelled) setError(err.message);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    // Only fire when we have a city or geo coords\n    if (city && city.trim() || (geo === null || geo === void 0 ? void 0 : geo.lat) != null && (geo === null || geo === void 0 ? void 0 : geo.lon) != null) {\n      loadWeather();\n    }\n    return () => {\n      cancelled = true;\n    };\n  }, [city, geo, units]); // ← watch units, too!\n\n  return {\n    current,\n    daily,\n    hourly,\n    loading,\n    error\n  };\n}\n_s(useWeather, \"nDdJAIXJR/Z7/3Cv/zNVUyk4mkc=\");","map":{"version":3,"names":["useState","useEffect","geocodeCity","fetchCurrentByCoords","fetchDailyForecastByCoords","fetchHourlyForecastByCoords","useWeather","city","geo","units","_s","_geo$lat","current","setCurrent","daily","setDaily","hourly","setHourly","loading","setLoading","error","setError","lat","n","cancelled","loadWeather","coords","lon","curRes","dayRes","hrRes","Promise","all","forecastDays","forecastHours","err","message","trim"],"sources":["/Users/dfashemo/seoTechDev/weatherApp/src/hooks/useWeather.js"],"sourcesContent":["// src/hooks/useWeather.js\nimport { useState, useEffect } from 'react';\nimport {\n  geocodeCity,\n  fetchCurrentByCoords,\n  fetchDailyForecastByCoords,\n  fetchHourlyForecastByCoords,\n} from '../api/weather';\n\n/**\n * @param {{\n *   city?: string,\n *   geo?: { lat: number, lon: number },\n *   units?: 'METRIC' | 'IMPERIAL'\n * }} options\n */\nexport function useWeather({ city = null, geo = null, units = 'METRIC' } = {}) {\n  const [current, setCurrent] = useState(null);\n  const [daily,   setDaily]   = useState(null);\n  const [hourly,  setHourly]  = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error,   setError]   = useState(null);\n\n  //pull primitives out of geo for stable deps\n  const lat = geo?.lat ?? n\n\n  useEffect(() => {\n    let cancelled = false;\n\n    async function loadWeather() {\n      setLoading(true);\n      setError(null);\n\n      try {\n        // 1️⃣ Resolve coordinates\n        const coords = city\n          ? await geocodeCity(city)\n          : { lat: geo.lat, lon: geo.lon };\n\n        // 2️⃣ Fetch everything in parallel, passing the chosen units\n        const [curRes, dayRes, hrRes] = await Promise.all([\n          fetchCurrentByCoords(      coords, units),\n          fetchDailyForecastByCoords(coords, 5,    5,    units),\n          fetchHourlyForecastByCoords(coords, 24,  24,   units),\n        ]);\n\n        if (!cancelled) {\n          setCurrent(curRes);                           // { currentConditions, metadata }\n          setDaily(  dayRes.forecastDays   || dayRes);  // array of day forecasts\n          setHourly( hrRes.forecastHours  || hrRes);    // array of hour forecasts\n        }\n      } catch (err) {\n        if (!cancelled) setError(err.message);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    // Only fire when we have a city or geo coords\n    if (\n      (city && city.trim()) ||\n      (geo?.lat != null && geo?.lon != null)\n    ) {\n      loadWeather();\n    }\n\n    return () => {\n      cancelled = true;\n    };\n  }, [city, geo, units]);   // ← watch units, too!\n\n  return { current, daily, hourly, loading, error };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}